<div class = "signUpContainer">
  <div class = "signUpHeader">
    <div> Welcome Back! </div>
  </div>
  <form  class = "signUpForm" #loginForm="ngForm" (ngSubmit) = "LogIn(loginForm)">
    <div class = "inputGroup">
      <input type="email" id="email" name="email" placeholder="âœ‰ï¸ Enter email" [(ngModel)]="model.email" required email #email="ngModel" [disabled]="isLoading">
      @if (email.invalid && (email.dirty || email.touched)) {
        <div>
          @if (email.errors?.['required']) {
            <div class = "error">Email is required.</div>
          }
          @if (email.errors?.['email']) {
            <div  class = "error">Enter a valid email.</div>
          }
        </div>
      }
    </div>
    <div class = "inputGroup">
      <input type="password" id="password" name="password" placeholder="ðŸ”‘ Enter password" [(ngModel)]="model.password" required minlength="4" #password="ngModel" [disabled]="isLoading">
      @if (password.invalid && (password.dirty || password.touched)) {
        <div>
          @if (password.errors?.['required']) {
            <div class = "error">Password is required.</div>
          }
          @if (password.errors?.['minlength']) {
            <div class = "error">Password must be atleast 4 characters long.</div>
          }
        </div>
      }
    </div>
    <div class = "submitButtonContainer">
      <button type="submit" class="submitButton"
      [disabled]="email.invalid || isLoading" > {{ isLoading ? 'Logging in...' : 'Log In' }} </button>
    </div>
  </form>
  <div class="forgotPassword">
    <div (click)="redirectToPage()" style="cursor: pointer;"> Forgot your password? </div>
  </div>
  <div class = "divider"><hr>OR<hr></div>
  <div class="cloudLoginButton">
    <img src="assets/microsoft-logo.png" alt="Microsoft Logo" class="cloudLogo">
    <div> Continue with Microsoft </div>
  </div>
</div>


<!-- Loader Overlay -->
@if (isLoading) {
  <div class="loaderOverlay">
    <div class="loaderBox">
      <div class="spinner" aria-hidden="true"></div>
      <div class="loaderText">Logging in...</div>
    </div>
  </div>
}

<!-- Success Popup -->
@if (showSuccessPopup) {
  <div class="popup successPopup">
    <div class="popupContent">
      <div class="popupHeader">
        <strong>Success</strong>
        <button class="closeBtn" (click)="closeSuccessPopup()">âœ•</button>
      </div>
      <div class="popupBody">{{ successMessage }}</div>
    </div>
  </div>
}

<!-- Error Popup -->
@if (showErrorPopup) {
  <div class="popup errorPopup">
    <div class="popupContent">
      <div class="popupHeader">
        <strong>Error</strong>
        <button class="closeBtn" (click)="closeErrorPopup()">âœ•</button>
      </div>
      <div class="popupBody">{{ errorMessage }}</div>
    </div>
  </div>
}